(function(e){var t=[],n=function(){},r={defaultPath:"/",before:n,on:n,notfound:n},o={current:null,previous:null,config:function(e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);return o},add:function(e,n,r){return e&&n&&("function"==typeof n&&(r=n,n=null),t.push({path:e,name:n,fn:r||function(){}})),o},go:function(e){return location.hash=e,o},back:function(e){return o.previous?(history.back(),o.previous=null):e&&(location.hash=e),o}},i=function(){var e=location.hash.slice(1),n=!1,i=o.current;e||(e=r.defaultPath),i&&i!=o.previous&&(o.previous=i),o.current=e;for(var s=0,a=t.length;a>s&&!n;s++){var l=t[s],c=l.path,u=l.name,f=l.fn;if("string"==typeof c)c.toLowerCase()==e.toLowerCase()&&(r.before.call(o,c,u),f.call(o),r.on.call(o,c,u),n=!0);else{var m=e.match(c);m&&(r.before.call(o,c,u,m),f.apply(o,m),r.on.call(o,c,u,m),n=!0)}}return n||r.notfound.call(o),o};o.init=function(){return e.addEventListener("hashchange",i),i()},o.reload=i,e.ruto=o})(window),function(e,t){function n(e,n){r.addType(e,function(i,s,a){var l,c,u,f,m=s,p=(new Date).getTime();if(!i){m={},f=[],u=0;try{for(i=n.length;i=n.key(u++);)o.test(i)&&(c=JSON.parse(n.getItem(i)),c.expires&&p>=c.expires?f.push(i):m[i.replace(o,"")]=c.data);for(;i=f.pop();)n.removeItem(i)}catch(d){}return m}if(i="__amplify__"+i,s===t){if(l=n.getItem(i),c=l?JSON.parse(l):{expires:-1},!(c.expires&&p>=c.expires))return c.data;n.removeItem(i)}else if(null===s)n.removeItem(i);else{c=JSON.stringify({data:s,expires:a.expires?p+a.expires:null});try{n.setItem(i,c)}catch(d){r[e]();try{n.setItem(i,c)}catch(d){throw r.error()}}}return m})}var r=e.store=function(e,t,n){var o=r.type;return n&&n.type&&n.type in r.types&&(o=n.type),r.types[o](e,t,n||{})};r.types={},r.type=null,r.addType=function(e,t){r.type||(r.type=e),r.types[e]=t,r[e]=function(t,n,o){return o=o||{},o.type=e,r(t,n,o)}},r.error=function(){return"amplify.store quota exceeded"};var o=/^__amplify__/;for(var i in{localStorage:1,sessionStorage:1})try{window[i].setItem("__amplify__","x"),window[i].removeItem("__amplify__"),n(i,window[i])}catch(s){}if(!r.types.localStorage&&window.globalStorage)try{n("globalStorage",window.globalStorage[window.location.hostname]),"sessionStorage"===r.type&&(r.type="globalStorage")}catch(s){}(function(){if(!r.types.localStorage){var e=document.createElement("div"),n="amplify";e.style.display="none",document.getElementsByTagName("head")[0].appendChild(e);try{e.addBehavior("#default#userdata"),e.load(n)}catch(o){return e.parentNode.removeChild(e),t}r.addType("userData",function(o,i,s){e.load(n);var a,l,c,u,f,m=i,p=(new Date).getTime();if(!o){for(m={},f=[],u=0;a=e.XMLDocument.documentElement.attributes[u++];)l=JSON.parse(a.value),l.expires&&p>=l.expires?f.push(a.name):m[a.name]=l.data;for(;o=f.pop();)e.removeAttribute(o);return e.save(n),m}if(o=o.replace(/[^\-._0-9A-Za-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c-\u200d\u203f\u2040\u2070-\u218f]/g,"-"),o=o.replace(/^-/,"_-"),i===t){if(a=e.getAttribute(o),l=a?JSON.parse(a):{expires:-1},!(l.expires&&p>=l.expires))return l.data;e.removeAttribute(o)}else null===i?e.removeAttribute(o):(c=e.getAttribute(o),l=JSON.stringify({data:i,expires:s.expires?p+s.expires:null}),e.setAttribute(o,l));try{e.save(n)}catch(d){null===c?e.removeAttribute(o):e.setAttribute(o,c),r.userData();try{e.setAttribute(o,l),e.save(n)}catch(d){throw null===c?e.removeAttribute(o):e.setAttribute(o,c),r.error()}}return m})}})(),function(){function e(e){return e===t?t:JSON.parse(JSON.stringify(e))}var n={},o={};r.addType("memory",function(r,i,s){return r?i===t?e(n[r]):(o[r]&&(clearTimeout(o[r]),delete o[r]),null===i?(delete n[r],null):(n[r]=i,s.expires&&(o[r]=setTimeout(function(){delete n[r],delete o[r]},s.expires)),i)):e(n)})}()}(this.amplify=this.amplify||{});var Hogan={};(function(e,t){function n(e,t,n){var r;return t&&"object"==typeof t&&(null!=t[e]?r=t[e]:n&&t.get&&"function"==typeof t.get&&(r=t.get(e))),r}function r(e,t,n,r){function o(){}function i(){}o.prototype=e,i.prototype=e.subs;var s,a=new o;a.subs=new i,a.subsText={},a.ib();for(s in t)a.subs[s]=t[s],a.subsText[s]=r;for(s in n)a.partials[s]=n[s];return a}function o(e){return(null===e||void 0===e?"":e)+""}function i(e){return e=o(e),f.test(e)?e.replace(s,"&amp;").replace(a,"&lt;").replace(l,"&gt;").replace(c,"&#39;").replace(u,"&quot;"):e}e.Template=function(e,t,n,r){e=e||{},this.r=e.code||this.r,this.c=n,this.options=r||{},this.text=t||"",this.partials=e.partials||{},this.subs=e.subs||{},this.ib()},e.Template.prototype={r:function(){return""},v:i,t:o,render:function(e,t,n){return this.ri([e],t||{},n)},ri:function(e,t,n){return this.r(e,t,n)},ep:function(e,t){var n=this.partials[e],o=t[n.name];if(n.instance&&n.base==o)return n.instance;if("string"==typeof o){if(!this.c)throw Error("No compiler available.");o=this.c.compile(o,this.options)}return o?(this.partials[e].base=o,n.subs&&(void 0===this.activeSub&&(t.stackText=this.text),o=r(o,n.subs,n.partials,t.stackText||this.text)),this.partials[e].instance=o,o):null},rp:function(e,t,n,r){var o=this.ep(e,n);return o?o.ri(t,n,r):""},rs:function(e,t,n){var r=e[e.length-1];if(!m(r))return n(e,t,this),void 0;for(var o=0;r.length>o;o++)e.push(r[o]),n(e,t,this),e.pop()},s:function(e,t,n,r,o,i,s){var a;return m(e)&&0===e.length?!1:("function"==typeof e&&(e=this.ms(e,t,n,r,o,i,s)),a=!!e,!r&&a&&t&&t.push("object"==typeof e?e:t[t.length-1]),a)},d:function(e,t,r,o){var i,s=e.split("."),a=this.f(s[0],t,r,o),l=this.options.modelGet,c=null;if("."===e&&m(t[t.length-2]))a=t[t.length-1];else for(var u=1;s.length>u;u++)i=n(s[u],a,l),null!=i?(c=a,a=i):a="";return o&&!a?!1:(o||"function"!=typeof a||(t.push(c),a=this.mv(a,t,r),t.pop()),a)},f:function(e,t,r,o){for(var i=!1,s=null,a=!1,l=this.options.modelGet,c=t.length-1;c>=0;c--)if(s=t[c],i=n(e,s,l),null!=i){a=!0;break}return a?(o||"function"!=typeof i||(i=this.mv(i,t,r)),i):o?!1:""},ls:function(e,t,n,r,i){var s=this.options.delimiters;return this.options.delimiters=i,this.b(this.ct(o(e.call(t,r)),t,n)),this.options.delimiters=s,!1},ct:function(e,t,n){if(this.options.disableLambda)throw Error("Lambda features disabled.");return this.c.compile(e,this.options).render(t,n)},b:t?function(e){this.buf.push(e)}:function(e){this.buf+=e},fl:t?function(){var e=this.buf.join("");return this.buf=[],e}:function(){var e=this.buf;return this.buf="",e},ib:function(){this.buf=t?[]:""},ms:function(e,t,n,r,o,i,s){var a,l=t[t.length-1],c=e.call(l);return"function"==typeof c?r?!0:(a=this.activeSub&&this.subsText[this.activeSub]?this.subsText[this.activeSub]:this.text,this.ls(c,l,n,a.substring(o,i),s)):c},mv:function(e,t,n){var r=t[t.length-1],i=e.call(r);return"function"==typeof i?this.ct(o(i.call(r)),r,n):i},sub:function(e,t,n,r){var o=this.subs[e];o&&(this.activeSub=e,o(t,n,this,r),this.activeSub=!1)}};var s=/&/g,a=/</g,l=/>/g,c=/\'/g,u=/\"/g,f=/[&<>\"\']/,m=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}})("undefined"!=typeof exports?exports:Hogan),function(e){var t=function(){return+new Date},n=!!e.XDomainRequest,r="withCredentials"in new XMLHttpRequest||n,o=!1,i=15e3,s={};try{o=new Worker("js/hnapi-worker.js"),o.addEventListener("message",function(e){var t=e.data,n=t.url||"";if(s[n]){var r=s[n];t.error?r.error(t.error):r.success(t.response),delete s[n]}},!1)}catch(a){}var l=function(a,l,c){if(l||(l=function(){}),c||(c=function(){}),r)if(o)s[a]={success:l,error:c},o.postMessage({url:a,timeout:i});else{var u=s[a]||(n?new XDomainRequest:new XMLHttpRequest);u._timeout&&clearTimeout(u._timeout),u._timeout=setTimeout(function(){u.abort()},i),u.onload=function(){clearTimeout(this._timeout),delete s[a];try{l(JSON.parse(this.responseText))}catch(e){c(e)}},u.onerror=u.onabort=u.ontimeout=function(e){clearTimeout(this._timeout),delete s[a],c(e)},(1>=u.readyState||n)&&(u.open("GET",a+"?"+t(),!0),u.send()),s[a]=u}else{var f=e.document,m=f.createElement("script"),p="callback"+t();e[p]=l,m.onerror=c,m.src=a+"?callback="+p,f.body.appendChild(m)}},c=["http://node-hnapi-hp.hp.af.cm/","http://node-hnapi-rs.rs.af.cm/","http://node-hnapi.azurewebsites.net/","http://node-hnapi-asia.azurewebsites.net/"];c.sort(function(){return.5-Math.random()});var u=c.length,f=function(e,t,n,r){var o=u-1>e?function(){f(e+1,t,n,r)}:r;l(c[e]+t,n,o)},m=function(e,t,n){l(c[0]+e,t,function(){f(0,e,t,n)})},p={urls:c,news:function(e,t){m("news",e,t)},news2:function(e,t){m("news2",e,t)},item:function(e,t,n){m("item/"+e,t,n)},comments:function(e,t,n){m("comments/"+e,t,n)}};e.hnapi=p}(window),function(e,t){"function"==typeof define&&define.amd?define("tappable",[],function(){return t(e,window.document),e.tappable}):t(e,window.document)}(this,function(e,t){var n=(Math.abs,function(){}),r={noScroll:!1,activeClass:"tappable-active",onTap:n,onStart:n,onMove:n,onMoveOut:n,onMoveIn:n,onEnd:n,onCancel:n,allowClick:!1,boundMargin:50,noScrollDelay:0,activeClassDelay:0,inactiveClassDelay:0},o="ontouchend"in document,i={start:o?"touchstart":"mousedown",move:o?"touchmove":"mousemove",end:o?"touchend":"mouseup"},s=function(e,n){var r=t.elementFromPoint(e,n);return 3==r.nodeType&&(r=r.parentNode),r},a=function(e){var t=e.target;if(t)return t;var n=e.targetTouches[0];return s(n.clientX,n.clientY)},l=function(e){return e.replace(/\s+/g," ").replace(/^\s+|\s+$/g,"")},c=function(e,t){return t?e.classList?(e.classList.add(t),void 0):(l(e.className).indexOf(t)>-1||(e.className=l(e.className+" "+t)),void 0):void 0},u=function(e,t){return t?e.classList?(e.classList.remove(t),void 0):(e.className=e.className.replace(RegExp("(^|\\s)"+t+"(?:\\s|$)"),"$1"),void 0):void 0},f=function(e,n){var r=t.documentElement,o=r.matchesSelector||r.mozMatchesSelector||r.webkitMatchesSelector||r.oMatchesSelector||r.msMatchesSelector;return o.call(e,n)},m=function(e,t){var n=!1;do n=f(e,t);while(!n&&(e=e.parentNode)&&e.ownerDocument);return n?e:!1};e.tappable=function(e,n){"function"==typeof n&&(n={onTap:n});var o={};for(var l in r)o[l]=n[l]||r[l];var f,p,d,h,b,v,g,y,w=o.containerElement||t.body,_=!1,T=!1,k=o.activeClass,S=o.activeClassDelay,E=o.inactiveClassDelay,x=o.noScroll,M=o.noScrollDelay,A=o.boundMargin;w.addEventListener(i.start,function(t){var n=m(a(t),e);if(n){if(S?(clearTimeout(v),v=setTimeout(function(){c(n,k)},S)):c(n,k),E&&n==p&&clearTimeout(g),d=t.clientX,h=t.clientY,!d||!h){var r=t.targetTouches[0];d=r.clientX,h=r.clientY}f=n,_=!1,T=!1,b=x?n.getBoundingClientRect():null,M&&(clearTimeout(y),x=!1,y=setTimeout(function(){x=!0},M)),o.onStart.call(w,t,n)}},!1),w.addEventListener(i.move,function(e){if(f){x?e.preventDefault():clearTimeout(v);var t=e.target,n=e.clientX,r=e.clientY;if(!t||!n||!r){var i=e.changedTouches[0];n||(n=i.clientX),r||(r=i.clientY),t||(t=s(n,r))}x?n>b.left-A&&b.right+A>n&&r>b.top-A&&b.bottom+A>r?(T=!1,c(f,k),o.onMoveIn.call(w,e,t)):(T=!0,u(f,k),o.onMoveOut.call(w,e,t)):!_&&Math.abs(r-h)>10&&(_=!0,u(f,k),o.onCancel.call(t,e)),o.onMove.call(w,e,t)}},!1),w.addEventListener(i.end,function(e){if(f){if(clearTimeout(v),E){S&&!_&&c(f,k);var t=f;g=setTimeout(function(){u(t,k)},E)}else u(f,k);o.onEnd.call(w,e,f);var n=3==e.which||2==e.button;_||T||n||o.onTap.call(w,e,f),p=f,f=null,setTimeout(function(){d=h=null},400)}},!1),w.addEventListener("touchcancel",function(e){f&&(u(f,k),f=d=h=null,o.onCancel.call(w,e))},!1),o.allowClick||w.addEventListener("click",function(t){var n=m(t.target,e);n?t.preventDefault():d&&h&&25>Math.abs(t.clientX-d)&&25>Math.abs(t.clientY-h)&&(t.stopPropagation(),t.preventDefault())},!1)}});var TWEEN=TWEEN||function(){var e=[];return{REVISION:"10",getAll:function(){return e},removeAll:function(){e=[]},add:function(t){e.push(t)},remove:function(t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)},update:function(t){if(0===e.length)return!1;var n=0,r=e.length;for(t=void 0!==t?t:void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now();r>n;)e[n].update(t)?n++:(e.splice(n,1),r--);return!0}}}();TWEEN.Tween=function(e){var t=e,n={},r={},o={},i=1e3,s=0,a=0,l=null,c=TWEEN.Easing.Linear.None,u=TWEEN.Interpolation.Linear,f=[],m=null,p=!1,d=null,h=null;for(var b in e)n[b]=parseFloat(e[b],10);this.to=function(e,t){return void 0!==t&&(i=t),r=e,this},this.start=function(e){TWEEN.add(this),p=!1,l=void 0!==e?e:void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now(),l+=a;for(var i in r){if(r[i]instanceof Array){if(0===r[i].length)continue;r[i]=[t[i]].concat(r[i])}n[i]=t[i],n[i]instanceof Array==!1&&(n[i]*=1),o[i]=n[i]||0}return this},this.stop=function(){return TWEEN.remove(this),this},this.delay=function(e){return a=e,this},this.repeat=function(e){return s=e,this},this.easing=function(e){return c=e,this},this.interpolation=function(e){return u=e,this},this.chain=function(){return f=arguments,this},this.onStart=function(e){return m=e,this},this.onUpdate=function(e){return d=e,this},this.onComplete=function(e){return h=e,this},this.update=function(e){if(l>e)return!0;p===!1&&(null!==m&&m.call(t),p=!0);var b=(e-l)/i;b=b>1?1:b;var v=c(b);for(var g in r){var y=n[g]||0,w=r[g];w instanceof Array?t[g]=u(w,v):("string"==typeof w&&(w=y+parseFloat(w,10)),t[g]=y+(w-y)*v)}if(null!==d&&d.call(t,v),1==b){if(s>0){isFinite(s)&&s--;for(var g in o)"string"==typeof r[g]&&(o[g]=o[g]+parseFloat(r[g],10)),n[g]=o[g];return l=e+a,!0}null!==h&&h.call(t);for(var _=0,T=f.length;T>_;_++)f[_].start(e);return!1}return!0}},TWEEN.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return 1>(e*=2)?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return 1>(e*=2)?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return 1>(e*=2)?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return 1>(e*=2)?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:1>(e*=2)?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return 1>(e*=2)?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){var t,n=.1,r=.4;return 0===e?0:1===e?1:(!n||1>n?(n=1,t=r/4):t=r*Math.asin(1/n)/(2*Math.PI),-(n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*2*Math.PI/r)))},Out:function(e){var t,n=.1,r=.4;return 0===e?0:1===e?1:(!n||1>n?(n=1,t=r/4):t=r*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*e)*Math.sin((e-t)*2*Math.PI/r)+1)},InOut:function(e){var t,n=.1,r=.4;return 0===e?0:1===e?1:(!n||1>n?(n=1,t=r/4):t=r*Math.asin(1/n)/(2*Math.PI),1>(e*=2)?-.5*n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*2*Math.PI/r):.5*n*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*2*Math.PI/r)+1)}},Back:{In:function(e){var t=1.70158;return e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return 1>(e*=2)?.5*e*e*((t+1)*e-t):.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-TWEEN.Easing.Bounce.Out(1-e)},Out:function(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return.5>e?.5*TWEEN.Easing.Bounce.In(2*e):.5*TWEEN.Easing.Bounce.Out(2*e-1)+.5}}},TWEEN.Interpolation={Linear:function(e,t){var n=e.length-1,r=n*t,o=Math.floor(r),i=TWEEN.Interpolation.Utils.Linear;return 0>t?i(e[0],e[1],r):t>1?i(e[n],e[n-1],n-r):i(e[o],e[o+1>n?n:o+1],r-o)},Bezier:function(e,t){var n,r=0,o=e.length-1,i=Math.pow,s=TWEEN.Interpolation.Utils.Bernstein;for(n=0;o>=n;n++)r+=i(1-t,o-n)*i(t,n)*e[n]*s(o,n);return r},CatmullRom:function(e,t){var n=e.length-1,r=n*t,o=Math.floor(r),i=TWEEN.Interpolation.Utils.CatmullRom;return e[0]===e[n]?(0>t&&(o=Math.floor(r=n*(1+t))),i(e[(o-1+n)%n],e[o],e[(o+1)%n],e[(o+2)%n],r-o)):0>t?e[0]-(i(e[0],e[0],e[1],e[1],-r)-e[0]):t>1?e[n]-(i(e[n],e[n],e[n-1],e[n-1],r-n)-e[n]):i(e[o?o-1:0],e[o],e[o+1>n?n:o+1],e[o+2>n?n:o+2],r-o)},Utils:{Linear:function(e,t,n){return(t-e)*n+e},Bernstein:function(e,t){var n=TWEEN.Interpolation.Utils.Factorial;return n(e)/n(t)/n(e-t)},Factorial:function(){var e=[1];return function(t){var n,r=1;if(e[t])return e[t];for(n=t;n>1;n--)r*=n;return e[t]=r}}(),CatmullRom:function(e,t,n,r,o){var i=.5*(n-e),s=.5*(r-t),a=o*o,l=o*a;return(2*t-2*n+i+s)*l+(-3*t+3*n-2*i-s)*a+i*o+t}}},function(){for(var e=0,t=["ms","moz","webkit","o"],n=0;t.length>n&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var n=(new Date).getTime(),r=Math.max(0,16-(n-e)),o=window.setTimeout(function(){t(n+r)},r);return e=n+r,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),function(e){TEMPLATES={"comments-toggle":new e({code:function(e,t,n){var r=this;return r.b(n=n||""),r.b('<button class="comments-toggle">'),r.b(r.v(r.f("comments_count",e,t,0))),r.b(" "),r.b(r.v(r.f("i_reply",e,t,0))),r.b("</button>"),r.fl()},partials:{},subs:{}}),comments:new e({code:function(e,t,n){var r=this;return r.b(n=n||""),r.s(r.f("comments",e,t,1),e,t,0,13,189,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b('<li><p class="metadata"><b>'),n.b(n.v(n.f("user",e,t,0))),n.b('</b> <time><a href="#" data-id="'),n.b(n.v(n.f("id",e,t,0))),n.b('" class="comment-permalink">'),n.b(n.v(n.f("time_ago",e,t,0))),n.b("</a></time></p><p>"),n.b(n.t(n.f("content",e,t,0))),n.b("<ul>"),n.b(n.rp("<comments_list0",e,t,"")),n.b("</ul></li>")}),e.pop()),r.fl()},partials:{"<comments_list0":{name:"comments_list",partials:{},subs:{}}},subs:{}}),"post-comments":new e({code:function(e,t,n){var r=this;return r.b(n=n||""),r.b('<div class="post-content">'),r.s(r.f("has_post",e,t,1),e,t,0,39,577,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b('<header><h1><a href="'),n.b(n.v(n.f("url",e,t,0))),n.b('" target="_blank">'),n.b(n.v(n.f("title",e,t,0))),n.b("<br>"),n.s(n.f("user",e,t,1),e,t,0,107,170,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.s(n.f("domain",e,t,1),e,t,0,118,159,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b('<span class="link-text">'),n.b(n.v(n.f("domain",e,t,0))),n.b("</span>")}),e.pop())}),e.pop()),n.b('</a></h1><p class="metadata">'),n.s(n.f("user",e,t,1),e,t,0,217,412,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b('<span class="inline-block">'),n.b(n.v(n.f("points",e,t,0))),n.b(" "),n.b(n.v(n.f("i_point",e,t,0))),n.b(" by "),n.b(n.v(n.f("user",e,t,0))),n.b('</span> <span class="inline-block">'),n.b(n.v(n.f("time_ago",e,t,0))),n.s(n.f("comments_count",e,t,1),e,t,0,344,386,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b(" &middot; "),n.b(n.v(n.f("comments_count",e,t,0))),n.b(" "),n.b(n.v(n.f("i_comment",e,t,0)))}),e.pop()),n.b("</span>")}),e.pop()),n.s(n.f("user",e,t,1),e,t,1,0,0,"")||(n.b('<span class="inline-block">'),n.b(n.v(n.f("time_ago",e,t,0))),n.b("</span>")),n.b('<a href="'),n.b(n.v(n.f("hn_url",e,t,0))),n.b('" target="_blank" class="external-link">'),n.b(n.v(n.f("short_hn_url",e,t,0))),n.b("</a></p></header>")}),e.pop()),r.s(r.f("has_content",e,t,1),e,t,0,606,929,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b('<section class="grouped-tableview">'),n.b(n.t(n.f("content",e,t,0))),n.s(n.f("has_poll",e,t,1),e,t,0,667,906,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b('<ul class="poll">'),n.s(n.f("poll",e,t,1),e,t,0,693,892,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b('<li title="'),n.b(n.v(n.f("percentage",e,t,0))),n.b('%"><span class="poll-details"><b>'),n.b(n.v(n.f("item",e,t,0))),n.b('</b> <span class="points">'),n.b(n.v(n.f("points",e,t,0))),n.b(" "),n.b(n.v(n.f("i_point",e,t,0))),n.b('</span></span><div class="poll-bar"><span style="width: '),n.b(n.v(n.f("width",e,t,0))),n.b('"></span></div></li>')}),e.pop()),n.b("</ul>")}),e.pop()),n.b("</section>")}),e.pop()),r.b('</div><section class="comments">'),r.s(r.f("loading",e,t,1),e,t,0,989,1030,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b('<div class="loader">Loading&hellip;</div>')}),e.pop()),r.s(r.f("load_error",e,t,1),e,t,0,1057,1140,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b('<div class="load-error">Couldn\'t load comments.<br><button>Try again</button></div>')}),e.pop()),r.s(r.f("loading",e,t,1),e,t,1,0,0,"")||r.s(r.f("load_error",e,t,1),e,t,1,0,0,"")||(r.s(r.f("has_comments",e,t,1),e,t,0,1199,1226,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<ul>"),n.b(n.rp("<comments_list0",e,t,"")),n.b("</ul>")}),e.pop()),r.s(r.f("has_comments",e,t,1),e,t,1,0,0,"")||r.b('<p class="no-comments">No comments.</p>')),r.b("</section>"),r.fl()},partials:{"<comments_list0":{name:"comments_list",partials:{},subs:{}}},subs:{}}),post:new e({code:function(e,t,n){var r=this;return r.b(n=n||""),r.b('<li id="story-'),r.b(r.v(r.f("id",e,t,0))),r.b('" data-index="'),r.b(r.v(r.f("i",e,t,0))),r.b('" class="post-'),r.b(r.v(r.f("type",e,t,0))),r.b('"><a href="'),r.b(r.v(r.f("url",e,t,0))),r.b('" class="'),r.s(r.f("detail_disclosure",e,t,1),e,t,0,110,127,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("detail-disclosure")}),e.pop()),r.s(r.f("disclosure",e,t,1),e,t,0,164,174,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("disclosure")}),e.pop()),r.b(" "),r.s(r.f("selected",e,t,1),e,t,0,203,211,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("selected")}),e.pop()),r.b('"><div class="number">'),r.b(r.v(r.f("i",e,t,0))),r.b('.</div><div class="story"><b>'),r.b(r.v(r.f("title",e,t,0))),r.b("</b>"),r.s(r.f("user",e,t,1),e,t,0,302,594,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b('<span class="metadata">'),n.s(n.f("domain",e,t,1),e,t,0,336,381,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b('<span class="link-text">'),n.b(n.v(n.f("domain",e,t,0))),n.b("</span><br>")}),e.pop()),n.b('<span class="inline-block">'),n.b(n.v(n.f("points",e,t,0))),n.b(" "),n.b(n.v(n.f("i_point",e,t,0))),n.b(" by "),n.b(n.v(n.f("user",e,t,0))),n.b('</span> <span class="inline-block">'),n.b(n.v(n.f("time_ago",e,t,0))),n.s(n.f("comments_count",e,t,1),e,t,0,519,561,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b(" &middot; "),n.b(n.v(n.f("comments_count",e,t,0))),n.b(" "),n.b(n.v(n.f("i_comment",e,t,0)))}),e.pop()),n.b("</span></span>")}),e.pop()),r.s(r.f("user",e,t,1),e,t,1,0,0,"")||(r.b('<span class="metadata">'),r.s(r.f("domain",e,t,1),e,t,0,646,691,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b('<span class="link-text">'),n.b(n.v(n.f("domain",e,t,0))),n.b("</span><br>")}),e.pop()),r.b('<span class="inline-block">'),r.b(r.v(r.f("time_ago",e,t,0))),r.b("</span></span>")),r.b("</div></a>"),r.s(r.f("detail_disclosure",e,t,1),e,t,0,796,870,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b('<a href="#/item/'),n.b(n.v(n.f("id",e,t,0))),n.b('" class="detail-disclosure-button"><span></span></a>')}),e.pop()),r.b("</li>"),r.fl()},partials:{},subs:{}}),"stories-load":new e({code:function(e,t,n){var r=this;return r.b(n=n||""),r.s(r.f("loading",e,t,1),e,t,0,12,53,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b('<div class="loader">Loading&hellip;</div>')}),e.pop()),r.s(r.f("load_error",e,t,1),e,t,0,80,132,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b('<div class="load-error">Couldn\'t load stories.</div>')}),e.pop()),r.fl()},partials:{},subs:{}})}}(Hogan.Template),function(e){var t=e.document;t.body;var n=e.$=function(e){return t.getElementById(e)},r={},o=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},i={pub:function(e,t){var n=r[e];if(n)for(var o=0,i=n.length;i>o;o++)n[o].call(this,t)},sub:function(e,t){r[e]||(r[e]=[]),r[e].push(t)},currentView:null,hideAllViews:function(){for(var e=t.querySelectorAll(".view"),n=0,r=e.length;r>n;n++)e[n].classList.add("hidden")},tmpl:function(e,t){var n=TEMPLATES[e];if(n)return t?n.render(t):n}};"undefined"!=typeof _gaq&&i.sub("logAPIError",function(e){_gaq.push(["_trackEvent","Errors","API",e])});var s=i.tmpl;amplify.store.sessionStorage&&"function"==typeof amplify.store.sessionStorage||(amplify.store.sessionStorage=amplify.store.memory);var a=t.querySelector("#view-home .scroll"),l=a.querySelector("section"),c=!1;i.news={options:{disclosure:!0},markupStory:function(e){if(/^item/i.test(e.url))e.url="#/item/"+e.id;else{e.external=!0;var n=t.createElement("a");n.href=e.url,e.domain=n.hostname.replace(/^www\./,""),delete n}return i.news.options.disclosure?("link"==e.type&&(e.detail_disclosure=!0),/^#\//.test(e.url)&&(e.disclosure=!0,e.domain=null)):e.id&&(e.url="#/item/"+e.id),e.i_point=1==e.points?"point":"points",e.i_comment=1==e.comments_count?"comment":"comments",s("post",e)},markupStories:function(e,t){var n="";t||(t=1);var r=i.news.markupStory;return e.forEach(function(e){e.i=t++,n+=r(e)}),n},updateStory:function(e){if(e&&e.id){var t,r=e.id,o=e.data,s="hacker-news",a=amplify.store(s);if(a)for(var l=0,c=a.length;c>l;l++){var u=a[l];if(r==u.id){t=u;break}}if(!t&&(s="hacker-news2",a=amplify.store(s)))for(var l=0,c=a.length;c>l;l++){var u=a[l];if(r==u.id){t=u;break}}if(t){var f=!1;if(["title","url","time_ago","comments_count","points"].forEach(function(e){var n=o[e];t[e]!=n&&(t[e]=n,f=!0)}),f){amplify.store(s,a);var m=n("story-"+r);m&&(t.selected=!!m.querySelector("a[href].selected"),t.i=m.dataset?m.dataset.index:m.getAttribute("data-index"),m.insertAdjacentHTML("afterend",i.news.markupStory(t)),m.parentNode.removeChild(m))}}}},render:function(e){if(!c){e||(e={});var t=amplify.store("hacker-news-cached"),r=s("stories-load"),o=function(e){var t=e.slice(),n='<ul class="tableview tableview-links" id="hnlist">'+i.news.markupStories(t)+(amplify.store("hacker-news2")?'<li><a class="more-link">More&hellip;<span class="loader"></span></a></li>':"")+"</ul>";l.innerHTML=n,i.pub("onRenderNews")};if(t){var a=amplify.store("hacker-news"),u=e.delay;u?(c=!0,l.innerHTML=r.render({loading:!0}),setTimeout(function(){c=!1,o(a)},u)):o(a)}else{c=!0,l.innerHTML=r.render({loading:!0});var f=function(){l.innerHTML=r.render({load_error:!0}),i.pub("logAPIError","news")};hnapi.news(function(e){return c=!1,!e||e.error?(f(),void 0):(amplify.store("hacker-news",e),amplify.store("hacker-news-cached",!0,{expires:6e5}),amplify.store("hacker-news2",null),o(e),hnapi.news2(function(e){e&&!e.error&&(amplify.store("hacker-news2",e),n("hnlist").insertAdjacentHTML("beforeend",'<li><a class="more-link">More&hellip;<span class="loader"></span></a></li>'))}),void 0)},function(){c=!1,f()})}}},reload:function(){i.news.render({delay:300})},more:function(e){e.classList.add("loading");var t=amplify.store("hacker-news2");setTimeout(function(){e.classList.remove("loading");var r=e.parentNode;if(r&&(r.parentNode&&r.parentNode.removeChild(r),t)){var o=t.slice(),s=i.news.markupStories(o,31);n("hnlist").insertAdjacentHTML("beforeend",s)}},400)}};var u=n("view-comments"),f=u.querySelector("header h1"),m=u.querySelector("section");i.comments={currentID:null,render:function(e){if(e){var n=amplify.store.sessionStorage("hacker-item-"+e);if(i.comments.currentID!=e||!n){i.comments.currentID=e;var r=function(e,t){if(e&&!e.error){var n=o(e);amplify.store.sessionStorage("hacker-comments-"+t,n);var r=m.querySelector(".comments>ul");if(r.querySelector(".more-link-container")||r.insertAdjacentHTML("beforeend",'<li class="more-link-container"><a class="more-link" data-id="'+t+'">More&hellip;</a></li>'),n.more_comments_id){var i=function(e){var t=amplify.store.sessionStorage("hacker-comments-"+e);t?t.more_comments_id&&i(t.more_comments_id):hnapi.comments(e,function(t){t&&!t.error&&(amplify.store.sessionStorage("hacker-comments-"+e,t),t.more_comments_id&&i(t.more_comments_id))})};i(n.more_comments_id)}}},a=function(e,n){var a=o(e),l=s("post-comments");if(a.has_post=!!a.title,!a.has_post)return f.innerHTML="",m.innerHTML=l.render(a),i.pub("adjustCommentsSection"),i.pub("onRenderComments"),void 0;var c=s("comments"),u=t.createElement("a");if(/^item/i.test(a.url)?a.url="http://news.ycombinator.com/"+a.url:(u.href=a.url,a.domain=u.hostname.replace(/^www\./,"")),a.has_comments=a.comments&&!!a.comments.length,a.i_point=1==a.points?"point":"points",a.i_comment=1==a.comments_count?"comment":"comments",a.has_content=!!a.content,a.poll){var p=0,d=0;a.poll.forEach(function(e){var t=e.points;t>d&&(d=t),p+=t,e.i_point=1==t?"point":"points"}),a.poll.forEach(function(e){var t=e.points;e.percentage=(100*(t/p)).toFixed(1),e.width=(100*(t/d)).toFixed(1)+"%"}),a.has_poll=a.has_content=!0}a.short_hn_url="news.ycombinator.com/item?id="+n,a.hn_url="http://"+a.short_hn_url,f.innerHTML=a.title;var h=l.render(a,{comments_list:c}),b=t.createElement("div");b.innerHTML=h;for(var v=b.querySelectorAll("a"),g=0,y=v.length;y>g;g++){var w=v[g];if(w.classList.contains("comment-permalink")){var n=w.dataset?w.dataset.id:w.getAttribute("data-id");w.href="http://news.ycombinator.com/item?id="+n}w.target="_blank"}if(h.length>2e4)for(var _=b.querySelectorAll(".comments>ul>li>ul"),T=s("comments-toggle"),k=0,y=_.length;y>k;k++){var S=_[k],E=S.querySelectorAll(".metadata").length;S.style.display="none",E&&S.insertAdjacentHTML("beforebegin",T.render({comments_count:E,i_reply:1==E?"reply":"replies"}))}for(;m.hasChildNodes();)m.removeChild(m.childNodes[0]);for(;b.hasChildNodes();)m.appendChild(b.childNodes[0]);if(delete b,a.more_comments_id){var n=a.more_comments_id,x=amplify.store.sessionStorage("hacker-comments-"+n);x?r(x,n):hnapi.comments(n,function(e){r(e,n)})}i.pub("onRenderComments")};if(n)m.scrollTop=0,a(n,e);else{var l=amplify.store("hacker-news");if(l)for(var c=0,u=l.length;u>c;c++){var p=l[c];if(e==p.id){n=p;break}}if(!n){var l=amplify.store("hacker-news2");if(l)for(var c=0,u=l.length;u>c;c++){var p=l[c];if(e==p.id){n=p;break}}}n?(n.loading=!0,a(n,e)):a({loading:!0},e);var d=function(){n?(delete n.loading,n.load_error=!0,a(n,e)):a({load_error:!0},e),i.pub("logAPIError","comments")};hnapi.item(e,function(t){if(i.comments.currentID==e){if(!t||t.error&&"comments"==i.currentView)return d(),void 0;amplify.store.sessionStorage("hacker-item-"+e,t,{expires:3e5}),i.news.updateStory({id:e,data:t}),a(t,e)}},function(){i.comments.currentID==e&&d()})}}}},toggle:function(e){var t=e.nextElementSibling;if(t){var n=t.style,r=m.scrollTop;n.display="none"==n.display?"":"none",m.scrollTop=r}},more:function(e){var n=e.dataset?e.dataset.id:e.getAttribute("data-id"),r=amplify.store.sessionStorage("hacker-comments-"+n);if(r){var o=s("comments"),i=s("comments"),a=o.render(r,{comments_list:o}),l=e.parentNode,c=l.parentNode,u=r.more_comments_id,f=t.createElement("ul");f.innerHTML=a;for(var m=f.querySelectorAll("a"),p=0,d=m.length;d>p;p++)m[p].target="_blank";for(var h=f.children,p=0,d=h.length;d>p;p++){var b=h[p].getElementsByTagName("ul")[0],v=b.querySelectorAll(".metadata").length;b.style.display="none",v&&b.insertAdjacentHTML("beforebegin",i.render({comments_count:v,i_reply:1==v?"reply":"replies"}))}for(u&&amplify.store.sessionStorage("hacker-comments-"+u)&&f.insertAdjacentHTML("beforeend",'<li class="more-link-container"><a class="more-link" data-id="'+u+'">More&hellip;</a></li>'),c.removeChild(l);f.hasChildNodes();)c.appendChild(f.childNodes[0]);delete f}else alert("Oops, the comments have expired.")},reload:function(){i.comments.currentID=null,ruto.reload()}},i.init=function(){i.news.render(),ruto.init()},e.hn=i,ruto.config({before:function(e,t){i.hideAllViews();var r=n("view-"+t);r.classList.remove("hidden"),i.currentView=t},notfound:function(){ruto.go("/")}}).add("/","home").add("/about","about").add(/^\/item\/(\d+)$/i,"comments",function(e,t){i.comments.render(t)})}(window),function(e){var t,n=e.document,r=n.body,o={},i=function(){return e.pageYOffset||"CSS1Compat"===n.compatMode&&n.documentElement.scrollTop||r.scrollTop||0},s=function(){o[location.hash.slice(1)]=i()};e.addEventListener("scroll",function(){clearTimeout(t),t=setTimeout(s,500)},!1),ruto.config({on:function(){var t=location.hash.slice(1);e.scrollTo(0,o[t]||0),o[t]=i()
}});var a=n.head||n.getElementsByTagName("head")[0],l=function(){var e=window.innerHeight,t=$("view-height");t||(t=n.createElement("style"),t.id="view-height",a.appendChild(t)),t.textContent=".view>.scroll{min-height: "+.85*e+"px}"};e.addEventListener("resize",l,!1),e.addEventListener("orientationchange",l,!1),l(),ibento("#view-home-refresh","click",hn.news.reload),ibento("#view-home .more-link","click",function(e,t){hn.news.more(t)}),ibento("button.comments-toggle","click",function(e,t){hn.comments.toggle(t)}),ibento("section.comments li>a.more-link","click",function(e,t){hn.comments.more(t)}),ibento("#view-comments .load-error button","click",hn.comments.reload),hn.init()}(window);
//@ sourceMappingURL=hw-ios.min.js.map